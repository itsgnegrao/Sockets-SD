package Parte3;/** * TCPClient: Cliente para conexao TCP * Descricao: Envia uma informacao ao servidor e finaliza a conexao *  */import java.net.*;import java.io.*;import java.util.logging.Level;import java.util.logging.Logger;public class TCPClient {    private static ChatMulticastGUI chatGUI;    private static DataOutputStream out;    private static DataInputStream in;            public TCPClient(ChatMulticastGUI chatGUI, String ipServidor, int serverPort){        this.chatGUI = chatGUI;        try {            Socket s = null;            s = new Socket(ipServidor, serverPort);  /* conecta com o servidor */            TCPClientEnvia(s);            TCPClientRecebe(s);        } catch (IOException ex) {            Logger.getLogger(TCPClient.class.getName()).log(Level.SEVERE, null, ex);        }    }        void EvniaMsg(String msg){                       try {            out.writeUTF(msg);            System.out.println ("Informacao enviada.");        } catch (IOException ex) {            Logger.getLogger(TCPClient.class.getName()).log(Level.SEVERE, null, ex);        }    }        public static void TCPClientEnvia(Socket s){        (new Thread() {            @Override            public void run() {                    try{                    /* cria objetos de leitura e escrita */                    out = new DataOutputStream( s.getOutputStream());	                } catch (UnknownHostException e){                    System.out.println("Socket:"+e.getMessage());                } catch (EOFException e){                    System.out.println("EOF:"+e.getMessage());                } catch (IOException e){                    System.out.println("leitura:"+e.getMessage());                } //catch            }        }).start();//Thread   }//metodo        public static void TCPClientRecebe(Socket s){        (new Thread() {            @Override            public void run() {                try{                    /* cria objetos de leitura e escrita */                    in = new DataInputStream( s.getInputStream());                    //out.writeUTF(msg);      	// envia uma string para o servidor		                    //System.out.println ("Informacao enviada.");		                                   String data = " ";                    while(true){                                                                      data = in.readUTF();                            System.out.println ("Informacao recebida.");                            chatGUI.exibeMsg(data);                                                    if(data.equals("ACKSAIR")){                                    in.close(); s.close();  //finaliza a conexao				                                    break;                            }                    }                } catch (UnknownHostException e){                    System.out.println("Socket:"+e.getMessage());                } catch (EOFException e){                    System.out.println("EOF:"+e.getMessage());                } catch (IOException e){                    System.out.println("leitura:"+e.getMessage());                } //catch            }        }).start();//Thread   }//metodo} //class